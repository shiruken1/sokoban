{"version":3,"sources":["Grid.js","Panel.js","Primitives.js","App.js","index.js"],"names":["Grid","handleAddClick","useThree","mouse","camera","usePlane","rotation","Math","PI","ref","onClick","vector","Vector3","x","y","unproject","direction","sub","position","normalize","distance","clone","add","multiplyScalar","projectedCoordinates","z","color","attach","args","Panel","handleMove","handleTurn","handleAdd","handleRemove","id","Menu","Dropdown","item","text","upward","options","key","INITIAL_CUBE_ROTATION","INITIAL_CONE_ROTATION","INITIAL_CYLINDER_ROTATION","INITIAL_SPHERE_ROTATION","Cube","movePosition","initPosition","highlightEdges","useBox","mass","api","useState","hovered","setHovered","useCursor","useEffect","adjustedPosition","map","n","velocity","set","castShadow","receiveShadow","onPointerOver","onPointerOut","Edges","visible","scale","transparent","depthTest","Cylinder","useCylinder","Cone","friction","Sphere","useSphere","threshold","App","adding","setAdding","type","isCurrent","uuid","generate","primitives","setPrimitives","panelHandlers","otherPrims","filter","p","currentPrim","find","fortyFive","removeAll","length","pop","lastPrimitive","scene","props","Primitive","PrimitivesMap","style","cursor","shadows","dpr","gl","alpha","fov","MapControls","Stars","newPrimitive","random","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.84e4ec17.chunk.js","sourcesContent":["import { Vector3 } from 'three';\nimport { useThree } from '@react-three/fiber';\nimport { usePlane } from '@react-three/cannon';\n\nconst REASONABLE_DROP_HEIGHT = 5;\n\nexport const Grid = ({ handleAddClick }) => {\n  const { mouse, camera } = useThree();\n  const [ ref ] = usePlane(() => ({\n    rotation: [-Math.PI / 2, 0, 0]\n  }));\n\n\n  const handleClick = () => {\n    // remember: the view is rotated, everything else stays the same\n    const vector = new Vector3(mouse.x, mouse.y, 1);\n    vector.unproject(camera);\n\n    const direction = vector.sub(camera.position).normalize();\n    const distance = - camera.position.y / direction.y;\n    const position = camera.position.clone().add(direction.multiplyScalar(distance));\n    const projectedCoordinates = [position.x, REASONABLE_DROP_HEIGHT, position.z];\n\n    handleAddClick(projectedCoordinates);\n  };\n\n  return (\n    <mesh ref={ref} onClick={handleClick}>\n      <meshStandardMaterial color={\"#dddddd\"} />\n      <planeGeometry attach=\"geometry\" args={[ 50, 50 ]} />\n      <gridHelper\n        position={[ 0, 0, 0.005 ]} // offset to stop z-fighting\n        args={[ 50, 50, 'blue', 'blue' ]}\n        rotation={[ -Math.PI / 2, 0, 0 ]} // rotated to match the plane\n      />\n    </mesh>\n  );\n}\n","import { Menu, Dropdown } from 'semantic-ui-react';\n\nexport const Panel = ({ handleMove, handleTurn, handleAdd, handleRemove }) => {\n  return (\n    <div id=\"panel\">\n      <Menu>\n        <Menu.Menu position='left'>\n          <Dropdown\n            item\n            text='Move'\n            upward={true}\n            options={[\n              { key: 1, text: 'Up', onClick: () => handleMove('Up') },\n              { key: 2, text: 'Right', onClick: () => handleMove('Right') },\n              { key: 3, text: 'Down', onClick: () => handleMove('Down') },\n              { key: 4, text: 'Left', onClick: () => handleMove('Left') }\n            ]}\n          />\n          <Dropdown\n            item\n            text='Turn'\n            upward={true}\n            options={[\n              { key: 1, text: 'Clockwise', onClick: () => handleTurn('CW') },\n              { key: 2, text: 'Counter-Clockwise', onClick: () => handleTurn('CCW') },\n            ]}\n          />\n        </Menu.Menu>\n        <Menu.Menu position='right'>\n          <Dropdown\n            item\n            text='Add'\n            upward={true}\n            options={[\n              { key: 1, text: 'Cube', onClick: () => handleAdd('Cube') },\n              { key: 2, text: 'Cone', onClick: () => handleAdd('Cone') },\n              { key: 3, text: 'Sphere', onClick: () => handleAdd('Sphere') },\n              { key: 4, text: 'Cylinder', onClick: () => handleAdd('Cylinder') },\n            ]}\n          />\n          <Dropdown\n            item\n            text='Remove'\n            upward={true}\n            options={[\n              { key: 1, text: 'Remove Current', onClick: () => handleRemove(false) },\n              { key: 2, text: 'Remove All', onClick: () => handleRemove(true) },\n            ]}\n          />\n        </Menu.Menu>\n      </Menu>\n    </div>\n  );\n};","import { useState, useEffect } from 'react';\nimport { Edges, useCursor } from '@react-three/drei';\nimport { useBox, useCylinder, useSphere } from '@react-three/cannon';\n\nconst CUBE_POSITION_MULTIPLIER = 5;\nconst INITIAL_CUBE_ROTATION = [0,0,0];\n\nconst CONE_POSITION_MULTIPLIER = 9;\nconst INITIAL_CONE_ROTATION = [0, -Math.PI / 2, 0];\n\nconst CYLINDER_POSITION_MULTIPLIER = 9;\nconst INITIAL_CYLINDER_ROTATION = [0, -Math.PI / 2, 0];\n\nconst SPHERE_POSITION_MULTIPLIER = 0.1;\nconst INITIAL_SPHERE_ROTATION = [0, -Math.PI / 2, -Math.PI / 2];\n\nexport const Cube = ({ movePosition, initPosition, rotation, highlightEdges, color }) => {\n  const [ ref, api ] = useBox(() => ({ mass: 1, position: initPosition, rotation: INITIAL_CUBE_ROTATION }))\n  const [hovered, setHovered] = useState();\n  useCursor(hovered, /*'pointer', 'auto'*/);\n\n  useEffect(() => {\n    const adjustedPosition = movePosition.map(n => n * CUBE_POSITION_MULTIPLIER);\n    api.velocity.set(...adjustedPosition);\n  }, [movePosition]);\n\n  useEffect(() => {\n    api.rotation.set(0, rotation, 0);\n  }, [rotation]);\n\n  return (\n    <mesh\n      ref={ref}\n      castShadow\n      receiveShadow\n      onPointerOver={() => setHovered(true)}\n      onPointerOut={() => setHovered(false)}>\n      <boxGeometry attach=\"geometry\" />\n      <meshLambertMaterial color={color} />\n\n      <Edges visible={highlightEdges} scale={1.1} >\n        <meshBasicMaterial transparent color=\"#333\" depthTest={true} />\n      </Edges>\n\n    </mesh>\n  )\n}\n\nexport const Cylinder = ({ movePosition, initPosition, rotation, highlightEdges, color }) => {\n  const [ ref, api ] = useCylinder(() => ({ mass: 1, position: initPosition, rotation: INITIAL_CYLINDER_ROTATION }))\n  const [hovered, setHovered] = useState();\n  useCursor(hovered, /*'pointer', 'auto'*/);\n\n  useEffect(() => {\n    const adjustedPosition = movePosition.map(n => n * CYLINDER_POSITION_MULTIPLIER);\n    api.velocity.set(...adjustedPosition);\n  }, [movePosition]);\n\n  useEffect(() => {\n    api.rotation.set(0, rotation, 0);\n  }, [rotation]);\n\n  return (\n    <mesh\n      ref={ref}\n      castShadow\n      receiveShadow\n      onPointerOver={() => setHovered(true)}\n      onPointerOut={() => setHovered(false)}>\n      <cylinderGeometry args={[ 0.5,0.5,0.75,12 ]} />\n      <meshLambertMaterial color={color} />\n\n      <Edges visible={highlightEdges} scale={1.1} >\n        <meshBasicMaterial transparent color=\"#333\" depthTest={true} />\n      </Edges>\n\n    </mesh>\n  )\n}\n\nexport const Cone = ({ movePosition, initPosition, rotation, highlightEdges, color }) => {\n  const [ ref, api ] = useCylinder(() => ({ mass: 1, position: initPosition, rotation: INITIAL_CONE_ROTATION, friction: 1 }))\n  const [hovered, setHovered] = useState();\n  useCursor(hovered, /*'pointer', 'auto'*/);\n\n  useEffect(() => {\n    const adjustedPosition = movePosition.map(n => n * CONE_POSITION_MULTIPLIER);\n    api.velocity.set(...adjustedPosition);\n  }, [movePosition]);\n\n  useEffect(() => {\n    api.rotation.set(0, rotation, 0);\n  }, [rotation]);\n\n  return (\n    <mesh\n      ref={ref}\n      castShadow\n      receiveShadow\n      onPointerOver={() => setHovered(true)}\n      onPointerOut={() => setHovered(false)}>\n      <cylinderGeometry args={[ 0,1,2,16 ]} />\n      <meshLambertMaterial color={color} />\n\n      <Edges visible={highlightEdges} scale={1.1} >\n        <meshBasicMaterial transparent color=\"#333\" depthTest={true} />\n      </Edges>\n\n    </mesh>\n  )\n}\n\nexport const Sphere = ({ movePosition, initPosition, rotation, highlightEdges, color }) => {\n  const [ ref, api ] = useSphere(() => ({ mass: 1, position: initPosition, rotation: INITIAL_SPHERE_ROTATION, friction: 1 }))\n  const [hovered, setHovered] = useState();\n  useCursor(hovered, /*'pointer', 'auto'*/);\n\n  useEffect(() => {\n    const adjustedPosition = movePosition.map(n => n * SPHERE_POSITION_MULTIPLIER);\n    api.velocity.set(...adjustedPosition);\n  }, [movePosition]);\n\n  useEffect(() => {\n    api.rotation.set(0, 0, rotation); // around this axis make the edges look better\n  }, [rotation]);\n\n  return (\n    <mesh\n      ref={ref}\n      castShadow\n      receiveShadow\n      onPointerOver={() => setHovered(true)}\n      onPointerOut={() => setHovered(false)}>\n      <sphereGeometry />\n      <meshLambertMaterial color={color} />\n\n      <Edges visible={highlightEdges} scale={1.1} threshold={5} >\n        <meshBasicMaterial transparent color=\"#333\" depthTest={false} />\n      </Edges>\n\n    </mesh>\n  )\n}\n","import uuid from 'short-uuid';\nimport { Vector3 } from 'three';\nimport React, { useState } from 'react';\nimport { Physics } from '@react-three/cannon';\nimport { Canvas, useThree } from '@react-three/fiber';\nimport { MapControls, Stars } from '@react-three/drei';\n\nimport './styles.css'\nimport { Grid } from './Grid';\nimport { Panel } from './Panel';\nimport * as PrimitivesMap from './Primitives';\n\nexport default function App() {\n  const [ adding, setAdding ] = useState(false);\n  const [ primitives, setPrimitives ] = useState([\n    {\n      rotation: 0,\n      type: 'Cube',\n      isCurrent: true,\n      color: 'hotpink',\n      id: uuid.generate(),\n      initPosition: [0,3,0],\n      movePosition: [0,0,0],\n    }\n  ]);\n\n  const panelHandlers = {\n    handleMove: direction => {\n      const otherPrims = primitives.filter(p => !p.isCurrent);\n      const currentPrim = primitives.find(p => p.isCurrent);\n\n      let position = [0,0,0];\n      switch(direction) {\n        case 'Up':\n          position = [0,0,-1];\n        break;\n        case 'Down':\n          position = [0,0,1];\n        break;\n        case 'Right':\n          position = [1,0,0];\n        break;\n        case 'Left':\n          position = [-1,0,0];\n        break;\n        default: break;\n      }\n\n      currentPrim.movePosition = position;\n      setPrimitives([ ...otherPrims, currentPrim ]);\n    },\n\n    handleTurn: direction => {\n      const fortyFive = Math.PI / 4;\n      const otherPrims = primitives.filter(p => !p.isCurrent);\n      const currentPrim = primitives.find(p => p.isCurrent);\n\n      let { rotation } = currentPrim;\n      switch(direction) {\n        case 'CW':\n          rotation += fortyFive;\n        break;\n        case 'CCW':\n          rotation -= fortyFive;\n        break;\n        default: break;\n      }\n\n      currentPrim.rotation = rotation;\n      setPrimitives([ ...otherPrims, currentPrim ]);\n    },\n\n    handleAdd: (type) => {\n      if(!adding) {\n        setAdding(type);\n      }\n    },\n\n    handleRemove: removeAll => {\n      if(removeAll || primitives.length < 2) {\n        setPrimitives([]);\n      } else {\n\n        const newPrimitivesList = primitives.pop();\n        const lastPrimitive = primitives.pop();\n        lastPrimitive.isCurrent = true;\n\n        setPrimitives([ ...primitives, lastPrimitive ]);\n      }\n    }\n  };\n\n  const onAddClick = initPosition => {\n    if(!adding) { // Grid's onClick bounces\n      return;\n    }\n\n    const newPrimitive = {\n      rotation: 0,\n      initPosition,\n      type: adding,\n      isCurrent: true,\n      id: uuid.generate(),\n      movePosition: [0,0,0],\n      color: Math.random() * 0xffffff,\n    };\n\n    if(primitives.length === 0) {\n      setPrimitives([newPrimitive]);\n\n    } else {\n      const lastPrimitive = primitives.pop();\n      lastPrimitive.isCurrent = false;\n\n      setPrimitives([ ...primitives, lastPrimitive, newPrimitive ]);\n    }\n\n    setAdding(false);\n  };\n\n  const scene = primitives.map(props => {\n\n    const Primitive = PrimitivesMap[props.type];\n    return <Primitive key={props.id} {...props} highlightEdges={props.isCurrent} />\n  });\n\n  return (\n    <div id=\"app\">\n      <Canvas\n        style={{ cursor: adding ? 'crosshair' : 'inherit' }}\n        shadows\n        dpr={[1, 2]}\n        gl={{ alpha: false }}\n        camera={{ position: [0, 10, 0], fov: 45 }}>\n          <MapControls />\n          <Stars />\n          <ambientLight />\n          <directionalLight position={[10, 10, 10]} castShadow shadow-mapSize={[2048, 2048]} />\n          <Physics>\n            <Grid handleAddClick={onAddClick} />\n            { scene }\n          </Physics>\n          <color attach=\"background\" args={['lightblue']} />\n      </Canvas>\n\n      <Panel id=\"panel\" { ...panelHandlers } />\n    </div>\n  );\n};","import App from './App';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'semantic-ui-css/semantic.min.css'\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}